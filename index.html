<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cancer Drug Predictive Analysis</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>üß¨ Cancer Drug Response Predictor</h1>
        <p>Genomic & Drug Sensitivity Analysis</p>
      </div>

      <div class="content">
        <!-- Input Form -->
        <div class="form-section">
          <h2>Genomic Data & Drug Sensitivity Input</h2>
          <form id="predictionForm">
            <div class="form-group">
              <label for="cancerType">Cancer Type:</label>
              <select id="cancerType" required>
                <option value="">Select Cancer Type</option>
                <option value="breast">Breast Cancer</option>
                <option value="lung">Lung Cancer</option>
                <option value="colorectal">Colorectal Cancer</option>
                <option value="melanoma">Melanoma</option>
                <option value="ovarian">Ovarian Cancer</option>
                <option value="lymphoma">Lymphoma</option>
                <option value="leukemia">Leukemia</option>
              </select>
            </div>

            <div class="section-title">üìä Genomic Markers</div>

            <div class="form-row">
              <div class="form-group">
                <label for="tmb">TMB (Tumor Mutational Burden) per Mb:</label>
                <input
                  type="number"
                  id="tmb"
                  placeholder="0-100 mutations/Mb"
                  min="0"
                  max="100"
                  step="0.1"
                  required
                />
              </div>

              <div class="form-group">
                <label for="msi">MSI Status:</label>
                <select id="msi" required>
                  <option value="">Select MSI Status</option>
                  <option value="mss">MSS (Microsatellite Stable)</option>
                  <option value="msi-l">MSI-L (Low)</option>
                  <option value="msi-h">MSI-H (High)</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="pdl1">PD-L1 Expression (%):</label>
                <input
                  type="number"
                  id="pdl1"
                  placeholder="0-100%"
                  min="0"
                  max="100"
                  step="0.1"
                  required
                />
              </div>

              <div class="form-group">
                <label for="mmr">MMR Status:</label>
                <select id="mmr" required>
                  <option value="">Select MMR Status</option>
                  <option value="proficient">Proficient (pMMR)</option>
                  <option value="deficient">Deficient (dMMR)</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="tp53">TP53 Mutation Status:</label>
                <select id="tp53" required>
                  <option value="">Select TP53 Status</option>
                  <option value="wildtype">Wild-type</option>
                  <option value="mutated">Mutated</option>
                </select>
              </div>

              <div class="form-group">
                <label for="brca">BRCA1/BRCA2 Status:</label>
                <select id="brca" required>
                  <option value="">Select BRCA Status</option>
                  <option value="wildtype">Wild-type</option>
                  <option value="mutated">Mutated</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="driverMutations"
                >Driver Mutations (comma-separated):</label
              >
              <input
                type="text"
                id="driverMutations"
                placeholder="e.g., EGFR, KRAS, ALK, ROS1"
                required
              />
            </div>

            <div class="section-title">üíä Drug Sensitivity Data</div>

            <div class="form-row">
              <div class="form-group">
                <label for="ic50">IC50 Value (ŒºM):</label>
                <input
                  type="number"
                  id="ic50"
                  placeholder="0.001-10"
                  min="0.001"
                  max="10"
                  step="0.001"
                  required
                />
              </div>

              <div class="form-group">
                <label for="auc">AUC Score:</label>
                <input
                  type="number"
                  id="auc"
                  placeholder="0.0-1.0"
                  min="0"
                  max="1"
                  step="0.01"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="drugName">Drug Name:</label>
                <select id="drugName" required>
                  <option value="">Select Drug</option>
                  <option value="pembrolizumab">
                    Pembrolizumab (Keytruda)
                  </option>
                  <option value="nivolumab">Nivolumab (Opdivo)</option>
                  <option value="gefitinib">Gefitinib (Iressa)</option>
                  <option value="erlotinib">Erlotinib (Tarceva)</option>
                  <option value="crizotinib">Crizotinib (Xalkori)</option>
                  <option value="cisplatin">Cisplatin</option>
                  <option value="carboplatin">Carboplatin</option>
                  <option value="docetaxel">Docetaxel</option>
                  <option value="paclitaxel">Paclitaxel</option>
                  <option value="trastuzumab">Trastuzumab (Herceptin)</option>
                </select>
              </div>

              <div class="form-group">
                <label for="drugClass">Drug Class:</label>
                <select id="drugClass" required>
                  <option value="">Select Class</option>
                  <option value="checkpoint-inhibitor">
                    Checkpoint Inhibitor
                  </option>
                  <option value="tyrosine-kinase-inhibitor">TKI</option>
                  <option value="chemotherapy">Chemotherapy</option>
                  <option value="monoclonal-antibody">
                    Monoclonal Antibody
                  </option>
                  <option value="targeted-therapy">Targeted Therapy</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="cyp3a4">CYP3A4 Metabolism:</label>
                <select id="cyp3a4" required>
                  <option value="">Select Metabolism</option>
                  <option value="poor">Poor Metabolizer</option>
                  <option value="intermediate">Intermediate Metabolizer</option>
                  <option value="extensive">Extensive Metabolizer</option>
                  <option value="ultrarapid">Ultra-rapid Metabolizer</option>
                </select>
              </div>

              <div class="form-group">
                <label for="resistanceScore">Resistance Score (0-100):</label>
                <input
                  type="number"
                  id="resistanceScore"
                  placeholder="0-100"
                  min="0"
                  max="100"
                  required
                />
              </div>
            </div>

            <div class="form-group">
              <label for="clinicalResponse">Prior Clinical Response:</label>
              <select id="clinicalResponse" required>
                <option value="">Select Option</option>
                <option value="sensitive">
                  Sensitive (Complete/Partial Response)
                </option>
                <option value="intermediate">
                  Intermediate (Stable Disease)
                </option>
                <option value="resistant">
                  Resistant (Progressive Disease)
                </option>
              </select>
            </div>

            <button type="submit" class="submit-btn">
              Predict Drug Response
            </button>
          </form>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection" style="display: none">
          <h2>Prediction Results</h2>

          <div class="result-card">
            <div class="result-header">
              <h3>Drug Response Prediction Score</h3>
              <div class="efficacy-percentage" id="efficacyScore">0%</div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
          </div>

          <div class="result-card">
            <h3>Predicted Response Category</h3>
            <div class="prediction-result" id="predictionResult"></div>
          </div>

          <div class="result-card">
            <h3>Genomic-Drug Compatibility</h3>
            <div id="genomicCompatibility" class="genomic-info"></div>
          </div>

          <div class="result-card">
            <h3>Sensitivity Assessment</h3>
            <div class="sensitivity-assessment">
              <p>
                <strong>IC50 Interpretation:</strong>
                <span class="risk-badge" id="ic50Interpretation"></span>
              </p>
              <p>
                <strong>Drug Resistance Risk:</strong>
                <span class="risk-badge" id="resistanceRisk"></span>
              </p>
              <p>
                <strong>Genetic Compatibility:</strong>
                <span class="risk-badge" id="geneticCompatibility"></span>
              </p>
            </div>
          </div>

          <div class="result-card">
            <h3>Clinical Recommendation</h3>
            <div class="recommendation" id="recommendation"></div>
          </div>

          <button type="button" class="reset-btn" onclick="resetForm()">
            New Analysis
          </button>
        </div>

        <!-- Info Section -->
        <div class="info-section">
          <h2>About Genomic-Drug Sensitivity Prediction</h2>
          <p>
            This tool predicts cancer drug response based on genomic markers and
            drug sensitivity data. It analyzes tumor mutational characteristics
            and drug-specific parameters to estimate treatment efficacy.
          </p>
          <div class="info-list">
            <p><strong>üß¨ Genomic Markers Analyzed:</strong></p>
            <ul>
              <li>
                Tumor Mutational Burden (TMB) - Indicates immune response
                potential
              </li>
              <li>
                Microsatellite Instability (MSI) - Associated with checkpoint
                inhibitor response
              </li>
              <li>PD-L1 Expression - Predictive for immunotherapy response</li>
              <li>
                Mismatch Repair (MMR) Status - Impacts treatment selection
              </li>
              <li>Driver Mutations - Gene-specific treatment targeting</li>
              <li>
                TP53 & BRCA Status - Associated with treatment sensitivity
              </li>
            </ul>
            <p><strong>üíä Drug Sensitivity Parameters:</strong></p>
            <ul>
              <li>IC50 - Concentration required for 50% growth inhibition</li>
              <li>AUC - Area Under Curve; measure of drug efficacy</li>
              <li>Resistance Score - Likelihood of acquired resistance</li>
              <li>Drug Metabolism - CYP3A4 status affects bioavailability</li>
            </ul>
            <p style="margin-top: 15px; color: #666; font-size: 0.95em">
              <strong>‚ö†Ô∏è Disclaimer:</strong> Results are for research and
              educational purposes. Clinical decisions should be made in
              consultation with oncologists using comprehensive patient data and
              clinical trial evidence.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      document
        .getElementById("predictionForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          predictEfficacy();
        });

      function predictEfficacy() {
        // Get genomic data
        const cancerType = document.getElementById("cancerType").value;
        const tmb = parseFloat(document.getElementById("tmb").value);
        const msi = document.getElementById("msi").value;
        const pdl1 = parseFloat(document.getElementById("pdl1").value);
        const mmr = document.getElementById("mmr").value;
        const tp53 = document.getElementById("tp53").value;
        const brca = document.getElementById("brca").value;
        const driverMutations =
          document.getElementById("driverMutations").value;

        // Get drug sensitivity data
        const ic50 = parseFloat(document.getElementById("ic50").value);
        const auc = parseFloat(document.getElementById("auc").value);
        const drugName = document.getElementById("drugName").value;
        const drugClass = document.getElementById("drugClass").value;
        const cyp3a4 = document.getElementById("cyp3a4").value;
        const resistanceScore = parseFloat(
          document.getElementById("resistanceScore").value,
        );
        const clinicalResponse =
          document.getElementById("clinicalResponse").value;

        // Calculate response prediction score (0-100)
        let responseScore = 50; // Baseline

        // Genomic factors
        // TMB factor - higher TMB generally indicates better immunotherapy response
        if (drugClass === "checkpoint-inhibitor") {
          if (tmb > 20) responseScore += 15;
          else if (tmb > 10) responseScore += 10;
          else if (tmb > 5) responseScore += 5;
          else responseScore -= 10;
        } else if (tmb > 15) {
          responseScore += 5;
        }

        // MSI factor - MSI-H associated with better response
        if (msi === "msi-h") {
          responseScore += 12;
        } else if (msi === "msi-l") {
          responseScore += 4;
        } else if (msi === "mss") {
          responseScore -= 5;
        }

        // PD-L1 expression
        if (drugClass === "checkpoint-inhibitor") {
          if (pdl1 > 50) responseScore += 15;
          else if (pdl1 > 1) responseScore += 10;
          else responseScore -= 8;
        }

        // MMR status
        if (mmr === "deficient") {
          responseScore += 10;
        } else {
          responseScore -= 5;
        }

        // TP53 and BRCA mutations
        if (tp53 === "mutated" && drugClass === "targeted-therapy") {
          responseScore -= 8;
        } else if (tp53 === "mutated") {
          responseScore -= 3;
        }

        if (brca === "mutated") {
          responseScore += 8;
        }

        // Drug sensitivity factors
        // IC50 factor - lower IC50 indicates higher sensitivity
        if (ic50 < 0.01) {
          responseScore += 18;
        } else if (ic50 < 0.1) {
          responseScore += 15;
        } else if (ic50 < 1) {
          responseScore += 10;
        } else if (ic50 < 5) {
          responseScore += 5;
        } else {
          responseScore -= 15;
        }

        // AUC factor
        if (auc > 0.8) {
          responseScore += 12;
        } else if (auc > 0.6) {
          responseScore += 8;
        } else if (auc > 0.4) {
          responseScore += 3;
        } else {
          responseScore -= 10;
        }

        // Resistance score impact
        if (resistanceScore > 70) {
          responseScore -= 20;
        } else if (resistanceScore > 50) {
          responseScore -= 12;
        } else if (resistanceScore > 30) {
          responseScore -= 5;
        }

        // Metabolism factor
        if (cyp3a4 === "poor") {
          responseScore += 5; // Better drug accumulation
        } else if (cyp3a4 === "ultrarapid") {
          responseScore -= 10; // Reduced drug levels
        }

        // Prior clinical response
        if (clinicalResponse === "sensitive") {
          responseScore += 20;
        } else if (clinicalResponse === "intermediate") {
          responseScore += 8;
        } else if (clinicalResponse === "resistant") {
          responseScore -= 25;
        }

        // Ensure score is within 0-100
        responseScore = Math.max(0, Math.min(100, responseScore));

        // Update UI
        document.getElementById("efficacyScore").textContent =
          Math.round(responseScore) + "%";
        document.getElementById("progressFill").style.width =
          responseScore + "%";

        // Determine response category and assessments
        let prediction = "";
        let genomicCompatibility = "";
        let ic50Interp = "";
        let resistanceRisk = "";
        let geneticCompat = "";
        let recommendation = "";

        // Response category
        if (responseScore >= 85) {
          prediction =
            '<span class="excellent">Highly Sensitive - Strong Response Expected</span>';
        } else if (responseScore >= 70) {
          prediction =
            '<span class="good">Sensitive - Good Response Expected</span>';
        } else if (responseScore >= 50) {
          prediction =
            '<span class="fair">Moderate Sensitivity - Partial Response Likely</span>';
        } else if (responseScore >= 30) {
          prediction =
            '<span class="poor">Low Sensitivity - Limited Response Expected</span>';
        } else {
          prediction =
            '<span class="poor">Resistant - Poor Response Expected</span>';
        }

        // IC50 interpretation
        if (ic50 < 0.1) {
          ic50Interp =
            '<span class="high">High Sensitivity (Very Low IC50)</span>';
        } else if (ic50 < 1) {
          ic50Interp =
            '<span class="moderate">Moderate Sensitivity (Low IC50)</span>';
        } else if (ic50 < 5) {
          ic50Interp =
            '<span class="moderate">Intermediate (Moderate IC50)</span>';
        } else {
          ic50Interp = '<span class="low">Low Sensitivity (High IC50)</span>';
        }

        // Resistance risk
        if (resistanceScore > 70) {
          resistanceRisk = '<span class="high">High Risk</span>';
        } else if (resistanceScore > 40) {
          resistanceRisk = '<span class="moderate">Moderate Risk</span>';
        } else {
          resistanceRisk = '<span class="low">Low Risk</span>';
        }

        // Genetic compatibility
        let compatFactors = 0;
        if (msi === "msi-h") compatFactors++;
        if (mmr === "deficient") compatFactors++;
        if (pdl1 > 1 && drugClass === "checkpoint-inhibitor") compatFactors++;
        if (tmb > 10) compatFactors++;
        if (brca === "mutated") compatFactors++;

        if (compatFactors >= 4) {
          geneticCompat = '<span class="high">Excellent Compatibility</span>';
        } else if (compatFactors >= 2) {
          geneticCompat = '<span class="moderate">Good Compatibility</span>';
        } else {
          geneticCompat = '<span class="low">Limited Compatibility</span>';
        }

        // Genomic compatibility details
        genomicCompatibility =
          '<div style="font-size: 0.95em; line-height: 1.8;">';
        genomicCompatibility += `<p><strong>TMB:</strong> ${tmb} mut/Mb (${tmb > 10 ? "High" : "Low"} burden)</p>`;
        genomicCompatibility += `<p><strong>MSI Status:</strong> ${msi.toUpperCase()}</p>`;
        genomicCompatibility += `<p><strong>PD-L1:</strong> ${pdl1}% expression</p>`;
        genomicCompatibility += `<p><strong>Driver Mutations:</strong> ${driverMutations}</p>`;
        genomicCompatibility += "</div>";

        // Clinical recommendation
        if (responseScore >= 85) {
          recommendation =
            "Strong candidate for this drug. Highly likely to achieve clinical response. Recommend proceeding with treatment with close monitoring.";
        } else if (responseScore >= 70) {
          recommendation =
            "Good candidate for this drug. Expected response rate is favorable. Monitor for efficacy and adjust dosage as needed.";
        } else if (responseScore >= 50) {
          recommendation =
            "Moderate sensitivity expected. Consider combination therapy or alternative drugs. Regular response assessment recommended.";
        } else if (responseScore >= 30) {
          recommendation =
            "Low probability of response. Explore alternative drug options with better genomic-drug compatibility or combination approaches.";
        } else {
          recommendation =
            "Unlikely to respond based on genomic profile and drug sensitivity. Strongly recommend exploring alternative therapeutic options or seeking clinical trial enrollment.";
        }

        document.getElementById("predictionResult").innerHTML = prediction;
        document.getElementById("genomicCompatibility").innerHTML =
          genomicCompatibility;
        document.getElementById("ic50Interpretation").innerHTML = ic50Interp;
        document.getElementById("resistanceRisk").innerHTML = resistanceRisk;
        document.getElementById("geneticCompatibility").innerHTML =
          geneticCompat;
        document.getElementById("recommendation").textContent = recommendation;

        // Show results section
        document.getElementById("resultsSection").style.display = "block";
        document
          .getElementById("resultsSection")
          .scrollIntoView({ behavior: "smooth" });
      }

      function resetForm() {
        document.getElementById("predictionForm").reset();
        document.getElementById("resultsSection").style.display = "none";
      }
    </script>
  </body>
</html>
